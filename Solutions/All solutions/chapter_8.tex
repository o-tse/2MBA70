
\textbf{Problem 8.2}

\begin{enumerate}[label={(\alph*)}]
\item (2 pts) 

For this let $h_t(x) = \mathbf{1}_{(-\infty,t]}$ and note that 
\[
	F_n(t) = (X_n)_\# \bbP_n ((-\infty,x]) = \int_\bbR \mathbbm{1}_{(-\infty,t]} \, \dd (X_n)_\# \bbP_n
	= \int_\bbR h_t \, \dd \mu_n.
\]
and similarly $F(t) = \int_\bbR h_t \, \dd \mu$
\item (3 pts)

\textbf{1 pt} The function $h$ is discontinuous only at $t$, i.e. $\cC_h = \bbR \setminus \{t\}$. 

\textbf{2 pts} Moreover, for any $\varepsilon > 0$
\[
	\mu((t-\varepsilon, t+\varepsilon)) = \mu((t-\varepsilon,t]) + \mu((t,t+\varepsilon))
	= F(t) - F(t-\varepsilon) + F(t + \varepsilon) - F(t).
\]
Since $F$ is continuous at $t$, the right hand side goes to zero as $\varepsilon \to 0$. Therefore
\[
	\mu(\{t\}) = \lim_{\varepsilon \to 0} \mu((t-\varepsilon, t+\varepsilon)) = 0,
\]
which implies that $\mu(\cC_h) = 1$.
\item (1 pt) The result follows by applying condition (2) in Theorem 7.6.
\item (2 pts)

\textbf{1 pt} Without loss of generality assume $x \in I_\ell = (a_\ell, b_\ell]$ for some $1 \le \ell \le L$. Then it holds that $\hat{g}(x) = g(b_\ell)$. 

\textbf{1 pt} Moreover, since $|x - b_\ell| < \delta$ we have that
\[
	|g(x) - \hat{g}(x)| = |g(x) - g(b_\ell)| < \varepsilon.
\]
\item (1 pt) Let $M=L$, $\beta_\ell = \sum_{t = 1}^\ell h(b_t)$ and $t_\ell = b_\ell$. Then
\[
	\hat{g} := \sum_{\ell = 1}^L \beta_\ell \mathbf{1}_{(-\infty, b_\ell]}.
\]
\item (2 pts) Using the representation in (e) we get
\begin{align*}
	\lim_{n \to \infty} \bbE[\hat{g}(X_n)] 
	&= \lim_{n \to \infty} \sum_{\ell = 1}^L \beta_\ell \int_\bbR \mathbf{1}_{X_n^{-1}((-\infty,b_\ell])} \, \dd \bbP \\
	&= \lim_{n \to \infty} 	\sum_{\ell = 1}^L \beta_\ell (X_n)_\# \bbP ((-\infty, b_\ell]) \\
	&= \lim_{n \to \infty} 	\sum_{\ell = 1}^L \beta_\ell F_n(b_\ell) \\
	&= \sum_{\ell = 1}^L F(b_\ell) = \bbE[\hat{g}(X)].
\end{align*}
\item (4 pts)
\textbf{1 pt} First we write
\begin{align*}
	\|\bbE[g(X_n)] - \bbE[g(X)]\| &\le \|\bbE[g(X_n)] - \bbE[\hat{g}(X_n)]\| 
		+ \|\bbE[g(X)] - \bbE[\hat{g}(X)]\| \\
	&\hspace{10pt}+ \|\bbE[\hat{g}(X_n)] - \bbE[\hat{g}(X)]\|.
	%&\le 2\varepsilon + \|\bbE[\hat{g}(X_n)] - \bbE[\hat{g}(X)]\|.
\end{align*}
\textbf{1 pt} We have shown in (f) that the last term goes to zero as $n \to \infty$. 

\textbf{1 pt} Next, using (d) it follows that the other two terms are bounded by $\varepsilon$.

\textbf{1 pt} Since $\varepsilon$ was arbitrary we conclude that
\[
	\lim_{n \to \infty} \bbE[g(X_n)] = \bbE[g(X)].
\]
\item (1 pt) This now follows from Theorem 7.6 (3).
\end{enumerate}

\bigskip

\textbf{Problem 8.3}

The main idea is to use the equivalent version of c

Suppose that $X_n \plim X$ and define $Y_n = |X_n - X|$. We need to show that $\bbP(Y_n > \varepsilon) \to 0$ holds for any $\varepsilon > 0$. First recall that $X_n \plim X$ is defined as weak convergence of $Y_n$ to the constant zero random variable. By Lemma 8.2 this is equivalent to 
\[
	\lim_{n \to \infty} \bbP(Y_n \le t) = \bbP(0 \le t),
\]
for all continuity points of the function $\omega \mapsto 0$. We now note that any $\varepsilon > 0$ is a continuity point of this function. Hence, we get
\[
	\lim_{n \to \infty} \bbP(Y_n > \varepsilon) = 1 - \lim_{n \to \infty} \bbP(Y_n \le \varepsilon) = 1 - \bbP(0 \le \varepsilon) = 0
\]

Now we prove the other implication. So suppose that $\bbP(Y_n > \varepsilon) \to 0$ holds for any $\varepsilon > 0$. We then have to prove that $(Y_n)_\# \bbP \Rightarrow 0_\# \bbP$. Due to Lemma 8.2 it is enough to show that
\[
	\lim_{n \to \infty} \bbP(Y_n \le t) = \bbP(0 \le t) = \mathbbm{1}_{t \ge 0},
\]
holds for all continuity points $t$ of the function $\omega \mapsto 0$. Notice that the only non-continuity point is $0$. Moreover, for all $t < 0$ we have that $\bbP(Y_n \le t) = 0$ since $Y_n \ge 0$ almost every-where. Finally, for all $t > 0$ we have
\[
	\lim_{n \to \infty} \bbP(Y_n \le t) = 1 - \lim_{n \to \infty} \bbP(Y_n > t) = 1 = \bbP(0 \le t). 
\]

\bigskip

\textbf{Problem 8.4}
Suppose that $X_n \aslim X$. Then by Lemma 5.2.16 this is equivalent to $\bbP(\|X_n - X\| > \varepsilon \text{ i.o.}) = 0$ for all $\varepsilon > 0$. 

For now fix an $\varepsilon > 0$ and write $A_n := \{\|X_n - X\| > \varepsilon\}$. Recall that
\[
	\{A_n \text{ i.o.}\} = \bigcap_{k = 1}^\infty \bigcup_{k \ge n} A_n
\]
and note two things:
\begin{enumerate}[label={(\alph*)}]
\item The sets $B_k := \bigcup_{n \ge k} A_n$ are non-increasing, i.e. $B_k \supset B_{k+1}$, and
\item $\bbP(A_k) \le \bbP(\bigcup_{n \ge k} A_n) = \bbP(B_k)$.
\end{enumerate}
 
We then have that:
\begin{align*}
	0 &= \bbP(\{A_n \text{ i.o.}\}) &&\text{by assumption} \\
	&= \bbP(\bigcap_{k =1}^\infty B_k) &&\text{by Lemma 5.2.16}\\
	&= \lim_{k \to \infty} \bbP(B_k) &&\text{by continuity form above (Proposition 2.2.15)}\\
	&\ge \lim_{k \to \infty} \bbP(A_k) &&\text{by (b)}.
\end{align*}
